<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a portfolio site for Samuel " sven svenningsen>
<meta name="viewport" content="width=device-width">
<title>Sven's Portfolio | Sven's Portfolio</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://altock.github.io/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><style>
    div.input_prompt {
      display: none;
    }
    </style>
</head>
<body>
    <section class="social"><ul>
<li><a href="#" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://github.com/altock" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
        <div class="post">
            <h1 class="title"><a href="posts/992-accuracy-on-employee-resignations/">99.2% Accuracy on Employee Resignations</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-03-07T20:58:31-05:00">2017-03-07 20:58</time>
</div>
                <div class="stats">
                                <a href="posts/992-accuracy-on-employee-resignations/#disqus_thread" data-disqus-identifier="cache/posts/992-accuracy-on-employee-resignations.html">Comments</a>


                </div>
            
            </div>
            <div class="body">
                <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Classifying-whether-or-not-employees-are-likely-to-resign">Classifying whether or not employees are likely to resign<a class="anchor-link" href="posts/992-accuracy-on-employee-resignations/#Classifying-whether-or-not-employees-are-likely-to-resign">¶</a>
</h2>
<p>First import all the libraries we are going to use</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">sklearn</span> <span class="k">import</span>  <span class="n">neighbors</span><span class="p">,</span> <span class="n">svm</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="k">import</span> <span class="n">LogisticRegressionCV</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="k">import</span> <span class="n">PCA</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">GradientBoostingClassifier</span><span class="p">,</span>\
    <span class="n">AdaBoostClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="k">import</span> <span class="n">MultinomialNB</span> 

<span class="kn">from</span> <span class="nn">sklearn</span> <span class="k">import</span> <span class="n">preprocessing</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">r2_score</span><span class="p">,</span>\
    <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">cross_val_score</span><span class="p">,</span> <span class="n">train_test_split</span><span class="p">,</span>\
    <span class="n">learning_curve</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_selection</span> <span class="k">import</span> <span class="n">RFE</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="k">import</span> <span class="n">Axes3D</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">DIR_DATA</span> <span class="o">=</span> <span class="s2">"data"</span>
<span class="n">DIR_PROCESSED</span> <span class="o">=</span> <span class="s2">"processed"</span>
<span class="n">CV_FOLDS</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="HR_comma_sep.csv">HR_comma_sep.csv<a class="anchor-link" href="posts/992-accuracy-on-employee-resignations/#HR_comma_sep.csv">¶</a>
</h4>
<p>All our data is stored in this file, here's a slightly altered description of the features provided with the competition.</p>
<h3 id="Features">Features<a class="anchor-link" href="posts/992-accuracy-on-employee-resignations/#Features">¶</a>
</h3>
<ul>
<li>Employee satisfaction level</li>
<li>Last evaluation</li>
<li>Number of projects</li>
<li>Average monthly hours</li>
<li>Time spent at the company</li>
<li>Whether they have had a work accident</li>
<li>Whether they have had a promotion in the last 5 years</li>
<li>Department</li>
<li>Salary</li>
</ul>
<h3 id="Target">Target<a class="anchor-link" href="posts/992-accuracy-on-employee-resignations/#Target">¶</a>
</h3>
<ul>
<li>Whether the employee has left</li>
</ul>
<p>Now let's load and look at the actual data</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DIR_DATA</span> <span class="o">+</span> <span class="s1">'/HR_comma_sep.csv'</span><span class="p">)</span>
<span class="n">hr</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[2]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>satisfaction_level</th>
      <th>last_evaluation</th>
      <th>number_project</th>
      <th>average_montly_hours</th>
      <th>time_spend_company</th>
      <th>Work_accident</th>
      <th>left</th>
      <th>promotion_last_5years</th>
      <th>sales</th>
      <th>salary</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>0.38</td>
      <td>0.53</td>
      <td>2</td>
      <td>157</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>sales</td>
      <td>low</td>
    </tr>
<tr>
<th>1</th>
      <td>0.80</td>
      <td>0.86</td>
      <td>5</td>
      <td>262</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>sales</td>
      <td>medium</td>
    </tr>
<tr>
<th>2</th>
      <td>0.11</td>
      <td>0.88</td>
      <td>7</td>
      <td>272</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>sales</td>
      <td>medium</td>
    </tr>
<tr>
<th>3</th>
      <td>0.72</td>
      <td>0.87</td>
      <td>5</td>
      <td>223</td>
      <td>5</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>sales</td>
      <td>low</td>
    </tr>
<tr>
<th>4</th>
      <td>0.37</td>
      <td>0.52</td>
      <td>2</td>
      <td>159</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>sales</td>
      <td>low</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[3]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>satisfaction_level</th>
      <th>last_evaluation</th>
      <th>number_project</th>
      <th>average_montly_hours</th>
      <th>time_spend_company</th>
      <th>Work_accident</th>
      <th>left</th>
      <th>promotion_last_5years</th>
    </tr></thead>
<tbody>
<tr>
<th>count</th>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
      <td>14999.000000</td>
    </tr>
<tr>
<th>mean</th>
      <td>0.612834</td>
      <td>0.716102</td>
      <td>3.803054</td>
      <td>201.050337</td>
      <td>3.498233</td>
      <td>0.144610</td>
      <td>0.238083</td>
      <td>0.021268</td>
    </tr>
<tr>
<th>std</th>
      <td>0.248631</td>
      <td>0.171169</td>
      <td>1.232592</td>
      <td>49.943099</td>
      <td>1.460136</td>
      <td>0.351719</td>
      <td>0.425924</td>
      <td>0.144281</td>
    </tr>
<tr>
<th>min</th>
      <td>0.090000</td>
      <td>0.360000</td>
      <td>2.000000</td>
      <td>96.000000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
<tr>
<th>25%</th>
      <td>0.440000</td>
      <td>0.560000</td>
      <td>3.000000</td>
      <td>156.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
<tr>
<th>50%</th>
      <td>0.640000</td>
      <td>0.720000</td>
      <td>4.000000</td>
      <td>200.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
<tr>
<th>75%</th>
      <td>0.820000</td>
      <td>0.870000</td>
      <td>5.000000</td>
      <td>245.000000</td>
      <td>4.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
<tr>
<th>max</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>7.000000</td>
      <td>310.000000</td>
      <td>10.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'Percent who left: </span><span class="si">{:.2f}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">hr</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">hr</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>

<div class="output_subarea output_stream output_stdout output_text">
<pre>Percent who left: 23.81
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, let's turn sales departments and salary (high/medium/low) into category types so that scikit-learn's algorithms can handle them</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hr</span><span class="o">.</span><span class="n">sales</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">sales</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="n">hr</span><span class="o">.</span><span class="n">salary</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">salary</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="n">hr</span><span class="p">[[</span><span class="s2">"sales"</span><span class="p">,</span><span class="s2">"salary"</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[5]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>sales</th>
      <th>salary</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>7</td>
      <td>1</td>
    </tr>
<tr>
<th>1</th>
      <td>7</td>
      <td>2</td>
    </tr>
<tr>
<th>2</th>
      <td>7</td>
      <td>2</td>
    </tr>
<tr>
<th>3</th>
      <td>7</td>
      <td>1</td>
    </tr>
<tr>
<th>4</th>
      <td>7</td>
      <td>1</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p class="more"><a href="posts/992-accuracy-on-employee-resignations/">Read more…</a></p>
</div>
</div>
</div>
</div>
</div>
            </div>
        </div>
        <div class="post">
            <h1 class="title"><a href="posts/missed-medical-appointments-exploration-under-construction/">Missed Medical Appointments Exploration (Under Construction)</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-03-06T21:12:17-05:00">2017-03-06 21:12</time>
</div>
                <div class="stats">
                                <a href="posts/missed-medical-appointments-exploration-under-construction/#disqus_thread" data-disqus-identifier="cache/posts/missed-medical-appointments-exploration-under-construction.html">Comments</a>


                </div>
            
            </div>
            <div class="body">
                <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">xgboost</span> <span class="k">as</span> <span class="nn">xgb</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="k">import</span> <span class="n">preprocessing</span><span class="p">,</span> <span class="n">neighbors</span><span class="p">,</span> <span class="n">svm</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="k">import</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestClassifier</span><span class="p">,</span> <span class="n">BaggingClassifier</span><span class="p">,</span> <span class="n">VotingClassifier</span><span class="p">,</span> <span class="n">GradientBoostingClassifier</span><span class="p">,</span> <span class="n">ExtraTreesClassifier</span><span class="p">,</span> \
  <span class="n">RandomForestRegressor</span><span class="p">,</span> <span class="n">AdaBoostRegressor</span><span class="p">,</span> <span class="n">RandomForestRegressor</span><span class="p">,</span> <span class="n">GradientBoostingRegressor</span><span class="p">,</span> <span class="n">AdaBoostClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="k">import</span> <span class="n">KMeans</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">r2_score</span><span class="p">,</span>  <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">cross_val_score</span><span class="p">,</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="k">import</span> <span class="n">LogisticRegression</span><span class="p">,</span> <span class="n">LinearRegression</span><span class="p">,</span> <span class="n">LogisticRegressionCV</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="k">import</span> <span class="n">MultinomialNB</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="k">import</span> <span class="n">PCA</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="k">import</span> <span class="n">Axes3D</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">sqrt</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">cycle</span>

<span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">DIR_DATA</span> <span class="o">=</span> <span class="s2">"data"</span>
<span class="n">DIR_PROCESSED</span> <span class="o">=</span> <span class="s2">"processed"</span>
<span class="n">LABEL</span> <span class="o">=</span> <span class="s2">"Status"</span>
<span class="n">NON_PREDICTORS</span> <span class="o">=</span> <span class="p">[</span><span class="n">LABEL</span><span class="p">]</span><span class="c1">#, "name","anime_id"]</span>
<span class="n">CV_FOLDS</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># No-show-Issue-Comma-300k.csv</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ma</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DIR_DATA</span> <span class="o">+</span> <span class="s1">'/No-show-Issue-Comma-300k.csv'</span><span class="p">)</span>
<span class="n">ma</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[46]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Age</th>
      <th>Gender</th>
      <th>AppointmentRegistration</th>
      <th>ApointmentData</th>
      <th>DayOfTheWeek</th>
      <th>Status</th>
      <th>Diabetes</th>
      <th>Alcoolism</th>
      <th>HiperTension</th>
      <th>Handcap</th>
      <th>Smokes</th>
      <th>Scholarship</th>
      <th>Tuberculosis</th>
      <th>Sms_Reminder</th>
      <th>AwaitingTime</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>19</td>
      <td>M</td>
      <td>2014-12-16T14:46:25Z</td>
      <td>2015-01-14T00:00:00Z</td>
      <td>Wednesday</td>
      <td>Show-Up</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>-29</td>
    </tr>
<tr>
<th>1</th>
      <td>24</td>
      <td>F</td>
      <td>2015-08-18T07:01:26Z</td>
      <td>2015-08-19T00:00:00Z</td>
      <td>Wednesday</td>
      <td>Show-Up</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>-1</td>
    </tr>
<tr>
<th>2</th>
      <td>4</td>
      <td>F</td>
      <td>2014-02-17T12:53:46Z</td>
      <td>2014-02-18T00:00:00Z</td>
      <td>Tuesday</td>
      <td>Show-Up</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>-1</td>
    </tr>
<tr>
<th>3</th>
      <td>5</td>
      <td>M</td>
      <td>2014-07-23T17:02:11Z</td>
      <td>2014-08-07T00:00:00Z</td>
      <td>Thursday</td>
      <td>Show-Up</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>-15</td>
    </tr>
<tr>
<th>4</th>
      <td>38</td>
      <td>M</td>
      <td>2015-10-21T15:20:09Z</td>
      <td>2015-10-27T00:00:00Z</td>
      <td>Tuesday</td>
      <td>Show-Up</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>-6</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'Percent who left: </span><span class="si">{:.2f}</span><span class="s1">%'</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">Status</span> <span class="o">==</span> <span class="s1">'Show-Up'</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">Status</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>

<div class="output_subarea output_stream output_stdout output_text">
<pre>Percent who left: 30.24%
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">getTime</span><span class="p">(</span><span class="n">appointment</span><span class="p">):</span>
    <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">appointment</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">'Z'</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">':'</span><span class="p">)</span>
    
    <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hour</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">minute</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">60</span><span class="o">*</span><span class="n">hour</span> <span class="o">+</span> <span class="n">minute</span>

<span class="n">ma</span><span class="p">[</span><span class="s2">"AppointmenTime"</span><span class="p">]</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">AppointmentRegistration</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">getTime</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ma</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[49]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Age</th>
      <th>Diabetes</th>
      <th>Alcoolism</th>
      <th>HiperTension</th>
      <th>Handcap</th>
      <th>Smokes</th>
      <th>Scholarship</th>
      <th>Tuberculosis</th>
      <th>Sms_Reminder</th>
      <th>AwaitingTime</th>
      <th>AppointmenTime</th>
    </tr></thead>
<tbody>
<tr>
<th>count</th>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
    </tr>
<tr>
<th>mean</th>
      <td>37.808017</td>
      <td>0.077967</td>
      <td>0.025010</td>
      <td>0.215890</td>
      <td>0.020523</td>
      <td>0.052370</td>
      <td>0.096897</td>
      <td>0.000450</td>
      <td>0.574173</td>
      <td>-13.841813</td>
      <td>705.811503</td>
    </tr>
<tr>
<th>std</th>
      <td>22.809014</td>
      <td>0.268120</td>
      <td>0.156156</td>
      <td>0.411439</td>
      <td>0.155934</td>
      <td>0.222772</td>
      <td>0.295818</td>
      <td>0.021208</td>
      <td>0.499826</td>
      <td>15.687697</td>
      <td>193.880593</td>
    </tr>
<tr>
<th>min</th>
      <td>-2.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-398.000000</td>
      <td>354.000000</td>
    </tr>
<tr>
<th>25%</th>
      <td>19.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-20.000000</td>
      <td>537.000000</td>
    </tr>
<tr>
<th>50%</th>
      <td>38.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>-8.000000</td>
      <td>667.000000</td>
    </tr>
<tr>
<th>75%</th>
      <td>56.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>-4.000000</td>
      <td>872.000000</td>
    </tr>
<tr>
<th>max</th>
      <td>113.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>4.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>-1.000000</td>
      <td>1362.000000</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ma</span><span class="o">.</span><span class="n">Status</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="n">ma</span><span class="o">.</span><span class="n">Gender</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">Gender</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="n">ma</span><span class="o">.</span><span class="n">DayOfTheWeek</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">DayOfTheWeek</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>
<span class="c1"># hr.Work_accident = hr.Work_accident.astype('category')</span>
<span class="c1"># hr.promotion_last_5years = hr.promotion_last_5years.astype('category')</span>
<span class="c1"># hr.left = hr.left.astype('category')</span>

<span class="c1"># Normalizing waiting time to mean 0 and unit variance</span>
<span class="n">ma</span><span class="o">.</span><span class="n">AwaitingTime</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">AwaitingTime</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">wait_time_scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">MinMaxScaler</span><span class="p">()</span> <span class="c1">#preprocessing.StandardScaler()</span>
<span class="n">ma</span><span class="o">.</span><span class="n">AwaitingTime</span> <span class="o">=</span> <span class="n">wait_time_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">AwaitingTime</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Feature Scaling Age to be between [0,1]</span>
<span class="n">ma</span><span class="o">.</span><span class="n">Age</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">Age</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">age_scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">ma</span><span class="o">.</span><span class="n">Age</span> <span class="o">=</span> <span class="n">age_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">Age</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># Feature Scaling Age to be between [0,1]</span>
<span class="n">ma</span><span class="o">.</span><span class="n">AppointmenTime</span> <span class="o">=</span> <span class="n">ma</span><span class="o">.</span><span class="n">AppointmenTime</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">time_scaler</span> <span class="o">=</span> <span class="n">preprocessing</span><span class="o">.</span><span class="n">MinMaxScaler</span><span class="p">()</span>
<span class="n">ma</span><span class="o">.</span><span class="n">AppointmenTime</span> <span class="o">=</span> <span class="n">time_scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">ma</span><span class="o">.</span><span class="n">AppointmenTime</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ma</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[51]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Age</th>
      <th>Gender</th>
      <th>AppointmentRegistration</th>
      <th>ApointmentData</th>
      <th>DayOfTheWeek</th>
      <th>Status</th>
      <th>Diabetes</th>
      <th>Alcoolism</th>
      <th>HiperTension</th>
      <th>Handcap</th>
      <th>Smokes</th>
      <th>Scholarship</th>
      <th>Tuberculosis</th>
      <th>Sms_Reminder</th>
      <th>AwaitingTime</th>
      <th>AppointmenTime</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>0.182609</td>
      <td>1</td>
      <td>2014-12-16T14:46:25Z</td>
      <td>2015-01-14T00:00:00Z</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.929471</td>
      <td>0.527778</td>
    </tr>
<tr>
<th>1</th>
      <td>0.226087</td>
      <td>0</td>
      <td>2015-08-18T07:01:26Z</td>
      <td>2015-08-19T00:00:00Z</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1.000000</td>
      <td>0.066468</td>
    </tr>
<tr>
<th>2</th>
      <td>0.052174</td>
      <td>0</td>
      <td>2014-02-17T12:53:46Z</td>
      <td>2014-02-18T00:00:00Z</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1.000000</td>
      <td>0.415675</td>
    </tr>
<tr>
<th>3</th>
      <td>0.060870</td>
      <td>1</td>
      <td>2014-07-23T17:02:11Z</td>
      <td>2014-08-07T00:00:00Z</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0.964736</td>
      <td>0.662698</td>
    </tr>
<tr>
<th>4</th>
      <td>0.347826</td>
      <td>1</td>
      <td>2015-10-21T15:20:09Z</td>
      <td>2015-10-27T00:00:00Z</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0.987406</td>
      <td>0.561508</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ma</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[52]:</div>


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Age</th>
      <th>Gender</th>
      <th>DayOfTheWeek</th>
      <th>Status</th>
      <th>Diabetes</th>
      <th>Alcoolism</th>
      <th>HiperTension</th>
      <th>Handcap</th>
      <th>Smokes</th>
      <th>Scholarship</th>
      <th>Tuberculosis</th>
      <th>Sms_Reminder</th>
      <th>AwaitingTime</th>
      <th>AppointmenTime</th>
    </tr></thead>
<tbody>
<tr>
<th>count</th>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
      <td>300000.000000</td>
    </tr>
<tr>
<th>mean</th>
      <td>0.346157</td>
      <td>0.331650</td>
      <td>3.326650</td>
      <td>0.697563</td>
      <td>0.077967</td>
      <td>0.025010</td>
      <td>0.215890</td>
      <td>0.020523</td>
      <td>0.052370</td>
      <td>0.096897</td>
      <td>0.000450</td>
      <td>0.574173</td>
      <td>0.967653</td>
      <td>0.349019</td>
    </tr>
<tr>
<th>std</th>
      <td>0.198339</td>
      <td>0.470807</td>
      <td>2.283518</td>
      <td>0.459314</td>
      <td>0.268120</td>
      <td>0.156156</td>
      <td>0.411439</td>
      <td>0.155934</td>
      <td>0.222772</td>
      <td>0.295818</td>
      <td>0.021208</td>
      <td>0.499826</td>
      <td>0.039516</td>
      <td>0.192342</td>
    </tr>
<tr>
<th>min</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
<tr>
<th>25%</th>
      <td>0.182609</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.952141</td>
      <td>0.181548</td>
    </tr>
<tr>
<th>50%</th>
      <td>0.347826</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.982368</td>
      <td>0.310516</td>
    </tr>
<tr>
<th>75%</th>
      <td>0.504348</td>
      <td>1.000000</td>
      <td>5.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.992443</td>
      <td>0.513889</td>
    </tr>
<tr>
<th>max</th>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>6.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>4.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p class="more"><a href="posts/missed-medical-appointments-exploration-under-construction/">Read more…</a></p>
</div>
</div>
</div>
</div>
</div>
            </div>
        </div>
    
                   <script>var disqus_shortname="ssven";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2017         <a href="mailto:svenningsensamuel@gmail.com">Samuel Svenningsen</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a></p>
            
        </footer>
</div>
    </section><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79040842-3', 'auto');
  ga('send', 'pageview');

</script><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
    </script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
